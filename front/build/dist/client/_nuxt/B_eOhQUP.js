import{_ as C}from"./B-UzwHtN.js";import{_ as B,i as N,h as P,r as c,g as E,j as F,c as s,a as m,t as i,k as l,b as v,w as h,G as I,o as n,d as x}from"./t96BDbEU.js";import"./DM5X67xV.js";import"./DiuXyGEC.js";import"./CqN7av0g.js";const S={key:0,class:"panorama-container"},Z={class:"text-3xl font-bold text-gray-900 text-center m-4 dark:text-white"},z={key:0,class:"error-message text-red-500 text-center mt-4 dark:text-white"},D={key:1,class:"text-center mb-4 dark:text-white"},L={key:2,class:"text-center mb-4 dark:text-white"},M={key:3,class:"text-center mb-4 dark:text-white"},R={class:"pagination"},G={key:1,class:"loading"},T={__name:"[id]",setup(U){const g=N(),p=P(),e=c(null),d=c(null),a=c(parseInt(g.params.id)),_=c(""),{$api:w,$loadGoogleMaps:f}=E(),k=t=>{const o={day:"2-digit",month:"2-digit",year:"numeric"};return new Date(t).toLocaleString("ru-RU",o)},y=async()=>{if(await f(),e.value&&d.value){const t={lat:parseFloat(e.value.latitude),lng:parseFloat(e.value.longitude)},o=new google.maps.StreetViewPanorama(d.value,{position:t,pov:{heading:parseFloat(e.value.heading)||0,pitch:parseFloat(e.value.tilt)-90||0},zoom:0});o.addListener("zoom_changed",()=>{const r=o.getZoom();console.log("Current zoom:",r),document.fullscreenElement&&r!==0&&o.setZoom(0)}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement&&o.setZoom(0)})}else console.warn("Контейнер для панорамы не готов или данные панорамы отсутствуют.")},u=async()=>{try{const t=await w.panoramas.getPanoramaById(a.value);e.value=t.data[0],await I(),y()}catch(t){console.error("Ошибка загрузки панорамы:",t)}};F(async()=>{await u()});const b=()=>{a.value>1&&(a.value-=1,p.push({name:"panoramas-id",params:{id:a.value}}),u())},V=()=>{a.value+=1,p.push({name:"panoramas-id",params:{id:a.value}}),u()};return(t,o)=>{const r=C;return n(),s("div",null,[e.value?(n(),s("div",S,[m("h1",Z,i(e.value.title),1),m("div",{ref_key:"streetViewContainer",ref:d,class:"street-view mb-2"},null,512),_.value?(n(),s("div",z,i(_.value),1)):l("",!0),e.value.address?(n(),s("div",D," Адреса: "+i(e.value.address),1)):l("",!0),e.value.description?(n(),s("div",L," Опис: "+i(e.value.description),1)):l("",!0),e.value.shooting_date?(n(),s("div",M," Дата зйомки: "+i(k(e.value.shooting_date)),1)):l("",!0),m("div",R,[v(r,{disabled:a.value<=1,class:"mx-4",onClick:b},{default:h(()=>[x(" Назад ")]),_:1},8,["disabled"]),v(r,{class:"mx-4",onClick:V},{default:h(()=>[x(" Вперед ")]),_:1})])])):(n(),s("div",G,"Загрузка панорамы..."))])}}},J=B(T,[["__scopeId","data-v-95599bc5"]]);export{J as default};
