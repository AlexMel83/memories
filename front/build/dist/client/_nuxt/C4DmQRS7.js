import{_ as F,u as A}from"./B-UzwHtN.js";import{r as p,j as O,N as W,_ as V,S as z,T as N,B as T,U as R,K as y,Z as X,o as u,c,a,F as U,x as j,y as h,V as g,s as D,W as $,k as m,g as K,$ as Z,b as q,w as G,t as f,d as b,p as H,e as J}from"./t96BDbEU.js";import{u as Q,a as Y,b as x}from"./DTs45OAN.js";import"./DM5X67xV.js";import"./DiuXyGEC.js";import"./CqN7av0g.js";import"./C07I_0q2.js";const ee={wrapper:"relative",container:"relative w-full flex overflow-x-auto snap-x snap-mandatory scroll-smooth",item:"flex flex-none snap-center",arrows:{wrapper:"flex items-center justify-between"},indicators:{wrapper:"absolute flex items-center justify-center gap-3 bottom-4 inset-x-0",base:"rounded-full h-3 w-3",active:"bg-primary-500 dark:bg-primary-400",inactive:"bg-gray-100 dark:bg-gray-800"},default:{prevButton:{color:"black",class:"rtl:[&_span:first-child]:rotate-180 absolute left-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"black",class:"rtl:[&_span:last-child]:rotate-180 absolute right-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-right-20-solid "}}},te=e=>{const d=p(0);function v(s){e.value.style.scrollSnapType="none",e.value.style.scrollBehavior="auto",d.value=s.pageX,window.addEventListener("mousemove",t),window.addEventListener("mouseup",l)}function l(){e.value.style.removeProperty("scroll-behavior"),e.value.style.removeProperty("scroll-snap-type"),e.value.style.removeProperty("pointer-events"),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",l)}function t(s){s.preventDefault(),e.value.style.pointerEvents="none";const i=s.pageX-d.value;d.value=s.pageX,e.value.scrollBy(-i,0)}O(()=>{e.value&&e.value.addEventListener("mousedown",v)}),W(()=>{e.value&&e.value.removeEventListener("mousedown",v)})},E=z(N.ui.strategy,N.ui.carousel,ee),oe=T({components:{UButton:F},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},arrows:{type:Boolean,default:!1},indicators:{type:Boolean,default:!1},prevButton:{type:Object,default:()=>E.default.prevButton},nextButton:{type:Object,default:()=>E.default.nextButton},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:void 0}},setup(e,{expose:d}){const{ui:v,attrs:l}=A("carousel",R(e,"ui"),E,R(e,"class")),t=p(),s=p(0),{x:i}=Q(t,{behavior:"smooth"}),{width:o}=Y(t);te(t),x(t,B=>{var L,I;const[C]=B;s.value=((I=(L=C==null?void 0:C.target)==null?void 0:L.firstElementChild)==null?void 0:I.clientWidth)||0});const r=y(()=>s.value?Math.round(i.value/s.value)+1:0),n=y(()=>s.value?e.items.length-Math.round(o.value/s.value)+1:0),_=y(()=>r.value<=1),k=y(()=>r.value===n.value);function M(){i.value+=s.value}function P(){i.value-=s.value}function S(B){i.value=(B-1)*s.value}return d({pages:n,page:r,prev:P,next:M,select:S}),{ui:v,attrs:l,isFirst:_,isLast:k,carouselRef:t,pages:n,currentPage:r,onClickNext:M,onClickPrev:P,onClick:S,twMerge:X}}}),se=["role"],ae=["aria-selected","aria-label","onClick"];function re(e,d,v,l,t,s){const i=F;return u(),c("div",$({class:e.ui.wrapper},e.attrs),[a("div",{ref:"carouselRef",class:h([e.ui.container,"no-scrollbar"])},[(u(!0),c(U,null,j(e.items,(o,r)=>(u(),c("div",{key:r,class:h(e.ui.item),role:e.indicators?"tabpanel":null},[g(e.$slots,"default",{item:o,index:r},void 0,!0)],10,se))),128))],2),e.arrows?(u(),c("div",{key:0,class:h(e.ui.arrows.wrapper)},[g(e.$slots,"prev",{onClick:e.onClickPrev,disabled:e.isFirst},()=>{var o;return[e.prevButton?(u(),D(i,$({key:0,disabled:e.isFirst},{...e.ui.default.prevButton,...e.prevButton},{class:e.twMerge(e.ui.default.prevButton.class,(o=e.prevButton)==null?void 0:o.class),"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["disabled","class","onClick"])):m("",!0)]},!0),g(e.$slots,"next",{onClick:e.onClickNext,disabled:e.isLast},()=>{var o;return[e.nextButton?(u(),D(i,$({key:0,disabled:e.isLast},{...e.ui.default.nextButton,...e.nextButton},{class:e.twMerge(e.ui.default.nextButton.class,(o=e.nextButton)==null?void 0:o.class),"aria-label":"Next",onClick:e.onClickNext}),null,16,["disabled","class","onClick"])):m("",!0)]},!0)],2)):m("",!0),e.indicators?(u(),c("div",{key:1,role:"tablist",class:h(e.ui.indicators.wrapper)},[(u(!0),c(U,null,j(e.pages,o=>g(e.$slots,"indicator",{key:o,onClick:e.onClick,active:o===e.currentPage,page:o},()=>[a("button",{type:"button",role:"tab","aria-selected":o===e.currentPage,class:h([e.ui.indicators.base,o===e.currentPage?e.ui.indicators.active:e.ui.indicators.inactive]),"aria-label":`set slide ${o}`,onClick:r=>e.onClick(o)},null,10,ae)],!0)),128))],2)):m("",!0)],16)}const ne=V(oe,[["render",re],["__scopeId","data-v-ea54307d"]]),le=window.setInterval,w=e=>(H("data-v-f54effa7"),e=e(),J(),e),ie={class:"memory-page"},ue={class:"memory-details"},ce={key:0},de={class:"photo-slider mb-6"},ve=["src"],pe={class:"text-3xl font-bold mb-4 dark:text-white"},me={class:"text-lg mb-6 dark:text-white"},fe={class:"info dark:text-white"},he=w(()=>a("strong",null,"Адреса:",-1)),ye={key:0},ge=w(()=>a("strong",null,"Дата події:",-1)),be=w(()=>a("strong",null,"Створено:",-1)),we={key:1},_e=w(()=>a("strong",null,"Оновлено:",-1)),ke={__name:"[id]",setup(e){const{$api:d}=K(),v=Z(),l=p(),t=p(null),s=p([]),i=p([]),o=r=>{const n={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(r).toLocaleString("ru-RU",n)};return O(async()=>{const r=v.params.id;try{const n=await d.memories.getMemoryById(r);if(!n.data)throw new Error("Memory not found");t.value=n.data[0]}catch(n){console.error("Error fetching memory data:",n)}s.value=t.value.memory_photos,i.value=s.value.map(n=>n.url),le(()=>{if(l.value){if(l.value.page===l.value.pages)return l.value.select(0);l.value.next()}},3e3)}),(r,n)=>{const _=ne;return u(),c("div",ie,[a("main",null,[a("section",ue,[t.value?(u(),c("div",ce,[a("div",de,[q(_,{ref_key:"carouselRef",ref:l,items:i.value,ui:{item:"basis-full",container:"rounded-lg"},"prev-button":{color:"gray",icon:"i-heroicons-arrow-left-20-solid"},"next-button":{color:"gray",icon:"i-heroicons-arrow-right-20-solid"},indicators:"",arrows:""},{default:G(({item:k})=>[a("img",{src:k,class:"w-full",draggable:"false"},null,8,ve)]),_:1},8,["items"])]),a("h1",pe,f(t.value.title),1),a("p",me,f(t.value.description),1),a("div",fe,[a("p",null,[he,b(" "+f(t.value.address||"Адрес не указан"),1)]),t.value.date_event?(u(),c("p",ye,[ge,b(" "+f(o(t.value.date_event)),1)])):m("",!0),a("p",null,[be,b(" "+f(o(t.value.created_at)),1)]),t.value.updated_at!==t.value.created_at?(u(),c("p",we,[_e,b(" "+f(o(t.value.updated_at)),1)])):m("",!0)])])):m("",!0)])])])}}},Le=V(ke,[["__scopeId","data-v-f54effa7"]]);export{Le as default};
